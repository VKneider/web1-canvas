<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calculadora VK</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div style="display: flex">
      <form id="form1">
        <div id="title">Add Coordinates</div>

        <div class="row">
          <div class="rowlabel"><label for="positionX"> X</label></div>
          <input class="inputForm" type="number" name="positionX" />
        </div>

        <button class="formBut" id="btn" type="submit">Add To Table</button>

        <div class="row">
          <div class="rowlabel"><label for="function"> Function </label></div>
          <input
            class="inputForm2"
            id="function"
            type="function"
            name="function"
          />
        </div>

        <button class="formBut" id="delTable">Delete All Rows</button>
      </form>

      

      <canvas id="myCanva"> </canvas>
      
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", firstGraph);
      document.addEventListener("click", graphFn);

      let c = document.getElementById("myCanva");
      let ctx = c.getContext("2d");
      c.width = 500;
      c.height = 500;

      function graphFn() {

        

          let fn = document.getElementById("function");
            if(fn.value==''){return console.log(1)}
            
            
        let idx = fn.value.indexOf("=");
        let str = fn.value.slice(idx + 1);
        
        let n=500;
        let object={}
        let i=-n;
        var x=i;
        
        ctx.moveTo(-n+250, 250-eval(str))
        ctx.beginPath();
        for (; i < n; i++) {
          
          x = i;
          
         
          
            

          
            
            
            ctx.lineWidth = 1;
            ctx.lineTo(i+250, 250-eval(str));
            ctx.stroke();
            
            
          }
          
          ctx.closePath();
        
        




        
    }







      function firstGraph() {
        
        
        ctx.beginPath();
        ctx.lineWidth = 1;

        ctx.moveTo(250, 0);
        ctx.lineTo(250, 501);
        ctx.stroke();
        ctx.closePath();

        ctx.beginPath();
        ctx.moveTo(0, 250);
        ctx.lineTo(501, 250);
        ctx.stroke();
        ctx.closePath();
      }
    </script>
  </body>
</html>
